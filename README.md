﻿# 💰 Money Bot - Telegram-бот для учёта личных финансов

![Go](https://img.shields.io/badge/go-%2300ADD8.svg?style=for-the-badge&logo=go&logoColor=white)
![Telegram](https://img.shields.io/badge/Telegram-26A5E4?style=for-the-badge&logo=telegram&logoColor=white)
![SQLite](https://img.shields.io/badge/sqlite-%2307405e.svg?style=for-the-badge&logo=sqlite&logoColor=white)

Простой и удобный Telegram-бот для учёта личных доходов и расходов. Этот проект был создан как учебный, с фокусом на освоение языка программирования Go, работу с базами данных, взаимодействие с внешними API и написание качественного кода.

---

## 🚀 Как пользоваться

### Запись транзакций

Просто отправьте боту сообщение в формате `ЧИСЛО КОММЕНТАРИЙ`:

*   **Расход**: `-500 кофе в Старбакс`
*   **Доход**: `10000 аванс`

Если вы укажете комментарий к расходу, бот автоматически определит категорию с помощью AI. Если комментарий не указан, будет установлена категория "Прочее".

### Список команд

| Команда | Алиасы | Описание |
| :--- | :--- | :--- |
| `/start` | | Показать приветственное сообщение. |
| `/today` | | Отчёт о доходах и расходах за сегодня. |
| `/week` | | Отчёт за текущую неделю. |
| `/month` | | Отчёт за текущий месяц. |
| `/export` | | Экспорт всех транзакций в CSV файл. |
| `/clearlast` | `/clear_last` | Удалить последнюю введённую транзакцию. |
| `/cleartoday` | `/clear_today` | Удалить все транзакции за сегодня. |

---

## 🛠️ Стек технологий

* **Язык:** Go
* **Telegram Bot API:** `go-telegram-bot-api/v5`
* **База данных:** SQLite
* **ORM:** `gorm`
* **AI классификация:** `OpenRouter API` (модель `mistralai/mistral-7b-instruct:free`)
* **Переменные окружения:** `godotenv`

---

## 📦 Установка и запуск

1.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/Ваш_логин/money-bot.git
    cd money-bot
    ```

2.  **Создайте файл `.gitignore`** в корне проекта (если его нет) и добавьте в него следующие строки, чтобы не хранить в репозитории секретные ключи и базу данных:
    ```gitignore
    # Файл с переменными окружения
    .env

    # Файл базы данных
    /db/data.db
    ```

3.  **Получите токен для вашего бота** у @BotFather в Telegram.

4.  **Получите ключ API** на сайте OpenRouter.

5.  **Создайте файл `.env`** в корневой директории проекта и добавьте в него ваши ключи:
    ```env
    TELEGRAM_BOT_TOKEN="ваш_токен_здесь"
    OPENROUTER_API_KEY="ваш_ключ_openrouter_здесь"
    ```
    **⚠️ Важно:** Никогда не публикуйте этот файл и не загружайте его в публичный репозиторий!

6.  **Установите зависимости и запустите бота:**
    ```bash
    go mod tidy
    go run ./cmd/bot
    ```

---

## 📂 Структура проекта (упрощённо)

```
.
├── cmd/
│   └── bot/
│       └── main.go       # Точка входа в программу
├── internal/
│   ├── bot/
│   │   └── bot.go        # Основная логика бота и маршрутизация команд
│   ├── handlers/
│   │   ├── export.go     # Хендлер для команды /export
│   │   ├── helpers.go    # Вспомогательные функции для работы с датами
│   │   ├── report.go     # Хендлер для отчётов (/today, /week, /month)
│   │   └── start.go      # Хендлер для команды /start
│   └── storage/
│       ├── models.go     # Модель данных (структура Transaction)
│       └── storage.go    # Логика для работы с базой данных
├── ai/
│   └── promt.go        # Логика для взаимодействия с AI API
├── db/
│   └── data.db           # Файл базы данных SQLite
└── go.mod
```


---

## 💡 Идеи для развития

* **Управление категориями:** Добавить команды для добавления/удаления/просмотра пользовательских категорий.
* **Валюты:** Поддержка нескольких валют с автоматической конвертацией.
* **Пользовательский интерфейс:** Улучшение взаимодействия с помощью inline-кнопок.
